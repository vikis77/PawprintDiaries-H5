import{l as a,m as s,p as l,r as e,a as t,w as o,g as c,o as u,d as r,v as n,x as d,y as i,F as p,b as f,z as _,M as v,s as m,u as h,A as k,S as g,f as C,t as y,B as I,i as b}from"./index-CFSraVz9.js";import{_ as x}from"./uni-search-bar.DsWg_mYr.js";import{a as $,r as j}from"./uni-app.es.klBOcF9e.js";import{_ as z}from"./返回.CROdAYn4.js";import{_ as B}from"./爱心.DlmT7F1Z.js";import{u as D}from"./uni-icons.Bq5_5DvT.js";import{_ as R}from"./_plugin-vue_export-helper.BCo6x5W8.js";import"./uni-icons.CIje-GWR.js";/* empty css                                                                  */const S=R({__name:"SearchResultPage",setup(R){const S=a(""),w=a("");w.value="https://cdn.luckyiur.com/catcat",S.value="https://pawprintdiaries.luckyiur.com";const A=a([]),F=a([]),V=a("");function P(){_({url:`/pages/Search?searchValue=${encodeURIComponent(V.value)}`})}function U(a){_({url:`/pages/Card?catId=${a}`})}function W(a){_({url:`/pages/Post?postId=${a}`})}function T(a){const s=l("token");console.log(V.value),v({url:`${S.value}/api/search/search?words=${a.value}`,method:"GET",header:{Authorization:`Bearer ${s}`},success:a=>{if(console.log(a),200===a.statusCode&&"2000"===a.data.code){m("searchResultData",a.data.data);const s=l("searchResultData");A.value=s.cats,F.value=s.posts.records,console.log(A.value),console.log(F.value)}else h({title:a.data.msg||"获取搜索结果失败",icon:"none"})},fail:a=>{h({title:"请求失败，请重试",icon:"none"})}})}return $((a=>{a&&a.searchWords?(V.value=decodeURIComponent(a.searchWords),console.log("接收到的参数 searchWords:",V.value)):console.log("未接收到搜索词参数")})),s((()=>{const a=l("searchResultData");A.value=a.cats,F.value=a.posts.records,console.log(A.value),console.log(F.value)})),(a,s)=>{const l=k,_=c,v=j(e("uni-search-bar"),x),m=I,h=b,$=g;return u(),t(_,{class:"container"},{default:o((()=>[r(_,{class:"layout"},{default:o((()=>[r(_,{class:"box-top"},{default:o((()=>[r(_,{class:"back",onClick:P},{default:o((()=>[r(l,{class:"btn1",plain:"true"},{default:o((()=>[n("img",{src:z,alt:"",class:"img"})])),_:1})])),_:1}),r(_,{class:"search-text"},{default:o((()=>[r(v,{modelValue:V.value,"onUpdate:modelValue":s[0]||(s[0]=a=>V.value=a),placeholder:"搜索帖子/猫猫名字/猫猫ID",focus:!0,maxlength:"30",onInput:a.input,onConfirm:T},null,8,["modelValue","onInput"])])),_:1})])),_:1}),r($,{"scroll-top":a.scrollTop,"scroll-y":"true",class:"postAreaLayout","show-scrollbar":"false",onScroll:a.handleScroll},{default:o((()=>[A.value?(u(),t(_,{key:0,class:"showCardBox"},{default:o((()=>[r(_,{class:"y0hj0"},{default:o((()=>[r(_,{class:"y89yh9"},{default:o((()=>[r(_,{class:"tzz876"},{default:o((()=>[r(_,{class:"t9x"},{default:o((()=>[r(_,{class:"Cardlist"},{default:o((()=>[r($,{class:"ta9u0a","scroll-x":"true"},{default:o((()=>[r(_,{class:"t42f"},{default:o((()=>[(u(!0),d(p,null,i(A.value,(s=>(u(),t(_,{class:"t2352",key:s.catId},{default:o((()=>[r(_,{class:"t7908f",onClick:a=>U(s.catId)},{default:o((()=>[r(m,{class:"img32r",src:`${w.value}/cat_avatar/${s.avatar}`,mode:"aspectFill"},null,8,["src"])])),_:2},1032,["onClick"]),r(_,{class:"t990k",onClick:a=>U(s.catId)},{default:o((()=>[r(_,{class:"t5grg3"},{default:o((()=>[r(h,{class:"t2rdf"},{default:o((()=>[C(y(s.catname)+" - "+y(s.age)+"个月 - "+y(1===s.gender?"雄性":"雌性"),1)])),_:2},1024)])),_:2},1024)])),_:2},1032,["onClick"]),r(_,{class:"divider"}),r(_,{class:"t79h",onClick:a.toBeDeveloped},{default:o((()=>[r(_,{class:""},{default:o((()=>[r(D,{type:"fire",size:"18"}),C(" 热度 ")])),_:1}),r(_,{class:""},{default:o((()=>[r(D,{type:"chatbubble",size:"18"}),C(" 讨论 ")])),_:1}),r(_,{class:""},{default:o((()=>[r(D,{type:"paperclip",size:"18"}),C(" 分享 ")])),_:1})])),_:1},8,["onClick"])])),_:2},1024)))),128))])),_:1})])),_:1})])),_:1})])),_:1})])),_:1})])),_:1})])),_:1})])),_:1})):f("",!0),F.value?(u(),t(_,{key:1,class:"content"},{default:o((()=>[(u(!0),d(p,null,i(F.value,(s=>(u(),t(_,{key:s.postId,class:"box"},{default:o((()=>[r(m,{class:"pic",src:`${w.value}/post_pics/${s.coverPicture}`,mode:"aspectFill",onClick:a=>W(s.postId)},null,8,["src","onClick"]),r(_,{class:"text",onClick:a=>W(s.postId)},{default:o((()=>[C(y(s.title),1)])),_:2},1032,["onClick"]),r(_,{class:"info",onClick:a.toBeDeveloped},{default:o((()=>[r(m,{class:"avatar",src:`${w.value}/user_avatar/${s.authorAvatar}`,mode:"aspectFill"},null,8,["src"]),r(h,{class:"nickname"},{default:o((()=>[C(y(s.authorNickname),1)])),_:2},1024),r(_,{class:"likes"},{default:o((()=>[r(m,{class:"like-icon",src:B}),r(h,{class:"like-count"},{default:o((()=>[C(y(s.likeCount),1)])),_:2},1024)])),_:2},1024)])),_:2},1032,["onClick"])])),_:2},1024)))),128))])),_:1})):f("",!0)])),_:1},8,["scroll-top","onScroll"])])),_:1})])),_:1})}}},[["__scopeId","data-v-4752bce7"]]);export{S as default};
