import{o as e,a,w as o,b as s,j as t,g as l,l as n,d as r,v as u,N as c,P as i,x as d,y as p,F as m,Q as f,p as _,u as h,M as b,s as v,z as g,A as y}from"./index-CFSraVz9.js";import{_ as k}from"./返回.CROdAYn4.js";import{_ as x}from"./uni-search-bar.DsWg_mYr.js";import{_ as j}from"./uni-section.2QgTZDWX.js";import{_ as B}from"./_plugin-vue_export-helper.BCo6x5W8.js";import"./uni-icons.CIje-GWR.js";import{a as C}from"./uni-app.es.klBOcF9e.js";/* empty css                                                                      */const $=B({name:"uniList","mp-weixin":{options:{multipleSlots:!1}},props:{stackFromEnd:{type:Boolean,default:!1},enableBackToTop:{type:[Boolean,String],default:!1},scrollY:{type:[Boolean,String],default:!1},border:{type:Boolean,default:!0},renderReverse:{type:Boolean,default:!1}},created(){this.firstChildAppend=!1},methods:{loadMore(e){this.$emit("scrolltolower")},scroll(e){this.$emit("scroll",e)}}},[["render",function(n,r,u,c,i,d){const p=l;return e(),a(p,{class:"uni-list uni-border-top-bottom"},{default:o((()=>[u.border?(e(),a(p,{key:0,class:"uni-list--border-top"})):s("",!0),t(n.$slots,"default",{},void 0,!0),u.border?(e(),a(p,{key:1,class:"uni-list--border-bottom"})):s("",!0)])),_:3})}],["__scopeId","data-v-bf390bdf"]]),I=B({__name:"Search",setup(s){const t=n("");n("").value="https://cdn.luckyiur.com/catcat",t.value="https://pawprintdiaries.luckyiur.com";const B=n(""),I=n("");function V(){f({url:"/pages/Home"})}function w(e){console.log("----input:",e)}function R(e){const a=_("token");a?b({url:`${t.value}/api/search/search?words=${e.value}`,method:"GET",header:{Authorization:`Bearer ${a}`},success:e=>{console.log(e),200===e.statusCode&&"2000"===e.data.code?(I.value=e.data.data,v("searchResultData",I.value),g({url:`/pages/SearchResultPage?searchWords=${encodeURIComponent(B.value)}`})):h({title:e.data.msg||"获取搜索结果失败",icon:"none"})},fail:e=>{h({title:"请求失败，请重试",icon:"none"})}}):h({title:"请登录之后再来搜索吧 ~~",icon:"none"})}return C((e=>{e&&e.searchValue?(B.value=decodeURIComponent(e.searchValue),console.log("接收到的参数 searchValue:",B.value)):console.log("未接收到搜索词参数")})),(s,t)=>{const n=y,f=l;return e(),a(f,{class:"contianer"},{default:o((()=>[r(f,{class:"layout"},{default:o((()=>[r(f,{class:"box-top"},{default:o((()=>[r(f,{class:"back",onClick:V},{default:o((()=>[r(n,{class:"btn1",plain:"true"},{default:o((()=>[u("img",{src:k,alt:"",class:"img"})])),_:1})])),_:1}),r(f,{class:"search-text"},{default:o((()=>[r(x,{modelValue:c(B),"onUpdate:modelValue":t[0]||(t[0]=e=>i(B)?B.value=e:null),placeholder:"搜索帖子/猫猫名字/猫猫ID",focus:!0,maxlength:"30",onInput:w,onConfirm:R},null,8,["modelValue"])])),_:1})])),_:1}),r(j,{class:"box-contenx",title:"搜索结果",type:"line"},{default:o((()=>[(e(!0),d(m,null,p(c(I),((o,s)=>(e(),a($,{key:s})))),128))])),_:1})])),_:1})])),_:1})}}},[["__scopeId","data-v-fe02e7c5"]]);export{I as default};
