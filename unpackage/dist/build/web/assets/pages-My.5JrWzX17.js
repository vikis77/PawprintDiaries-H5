import{l as s,p as a,M as t,O as l,u as e,a as o,w as c,g as u,o as n,d as r,v as i,f as d,t as p,x as f,y as _,F as m,S as b,z as v,B as g,i as k}from"./index-CFSraVz9.js";import{_ as C}from"./爱心.DlmT7F1Z.js";import{u as h}from"./uni-icons.Bq5_5DvT.js";import{o as y}from"./uni-app.es.klBOcF9e.js";import{_ as x}from"./_plugin-vue_export-helper.BCo6x5W8.js";/* empty css                                                                  */const j=""+new URL("xxavatar1-ICGHPE9t.jpg",import.meta.url).href,I=x({__name:"My",setup(x){const I=s(""),w=s("");w.value="https://cdn.luckyiur.com/catcat",I.value="https://pawprintdiaries.luckyiur.com",s("");const $=s({userId:"",username:"",nickName:"",email:"",phoneNumber:"",brithday:"",address:"",avatar:"",role:"",status:0,createTime:"",updateTime:"",postCount:0,fansCount:0,followCount:0,signature:"",postList:[]});function z(s){console.log(s),v({url:`/pages/Post?postId=${s}`})}y((()=>{console.log("主页挂载");const s=a("token");s?(console.log(s),t({url:`${I.value}/api/user/profile`,method:"GET",header:{Authorization:`Bearer ${s}`},success:s=>{console.log(s),200===s.statusCode&&"2000"===s.data.code?($.value=s.data.data,console.log("打印user:"),console.log($.value)):(l("token"),e({title:s.data.msg||"获取用户数据失败",icon:"none"}))},fail:()=>{e({title:"请求失败，请重试",icon:"none"})}})):(l("token"),e({title:"未登录，请先登录",icon:"none"}))}));const S=()=>{e({title:"待开发",icon:"error"})};return(s,a)=>{const t=u,l=g,e=k,v=b;return n(),o(t,{class:"container"},{default:c((()=>[r(t,{class:"profile-header"},{default:c((()=>[i("img",{class:"avatar",src:j,mode:"aspectFill"}),r(t,{class:"username"},{default:c((()=>[d(p($.value.nickName),1)])),_:1}),r(t,{class:"signature"},{default:c((()=>[d("个性签名："+p($.value.signature),1)])),_:1})])),_:1}),r(t,{class:"stats-bar",onClick:S},{default:c((()=>[r(t,{class:"stats-item"},{default:c((()=>[r(t,{class:"stats-number"},{default:c((()=>[d(p($.value.postCount),1)])),_:1}),r(t,{class:"stats-label"},{default:c((()=>[d("贴子数")])),_:1})])),_:1}),r(t,{class:"stats-item"},{default:c((()=>[r(t,{class:"stats-number"},{default:c((()=>[d(p($.value.fansCount),1)])),_:1}),r(t,{class:"stats-label"},{default:c((()=>[d("粉丝数")])),_:1})])),_:1}),r(t,{class:"stats-item"},{default:c((()=>[r(t,{class:"stats-number"},{default:c((()=>[d(p($.value.followCount),1)])),_:1}),r(t,{class:"stats-label"},{default:c((()=>[d("关注数")])),_:1})])),_:1})])),_:1}),r(v,{"scroll-top":s.scrollTop,"scroll-y":"true",class:"post-list","show-scrollbar":"false",onScroll:s.handleScroll},{default:c((()=>[r(t,{class:"content"},{default:c((()=>[(n(!0),f(m,null,_($.value.postList,(s=>(n(),o(t,{key:s.postId,class:"box"},{default:c((()=>[r(l,{class:"pic",src:`${w.value}/post_pics/${s.coverPicture}`,mode:"aspectFill",onClick:a=>z(s.postId)},null,8,["src","onClick"]),r(t,{class:"text",onClick:a=>z(s.postId)},{default:c((()=>[d(p(s.title),1)])),_:2},1032,["onClick"]),r(t,{class:"info",onClick:S},{default:c((()=>[r(t,{class:"likes"},{default:c((()=>[i("img",{class:"like-icon",src:C}),r(e,{class:"like-count"},{default:c((()=>[d(p(s.likeCount),1)])),_:2},1024)])),_:2},1024),r(t,{class:"star"},{default:c((()=>[r(h,{type:"star",size:"20"}),r(e,{class:"star-count"},{default:c((()=>[d(p(s.collectingCount),1)])),_:2},1024)])),_:2},1024),r(t,{class:"chatbubble"},{default:c((()=>[r(h,{type:"chatbubble",size:"20"}),r(e,{class:"chatbubble-count"},{default:c((()=>[d(p(s.commentCount),1)])),_:2},1024)])),_:2},1024)])),_:2},1024)])),_:2},1024)))),128))])),_:1})])),_:1},8,["scroll-top","onScroll"])])),_:1})}}},[["__scopeId","data-v-2f844b98"]]);export{I as default};
