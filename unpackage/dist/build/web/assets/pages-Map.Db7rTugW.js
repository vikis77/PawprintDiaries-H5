import{r as e,o as t,a,w as o,n as l,e as i,d as n,b as s,x as c,F as r,y as u,f as d,t as p,g as h,B as f,i as m,p as g,s as v,k as _,S as y,l as b,M as w,u as M,m as A,L as x,N as k,v as C,A as I}from"./index-CFSraVz9.js";import{_ as S}from"./uni-icons.CIje-GWR.js";import{r as P,o as U}from"./uni-app.es.klBOcF9e.js";import{_ as L}from"./_plugin-vue_export-helper.BCo6x5W8.js";import{_ as D,a as V}from"./uni-forms.DPKVDRlQ.js";import{V as j,_ as z}from"./uni-easyinput.BG8xWcF5.js";import{_ as F}from"./uni-popup.ClItDTjr.js";import"./uni-load-more.DRX41OXE.js";import{_ as B}from"./uni-section.2QgTZDWX.js";import{_ as T,a as $}from"./uni-col.BqLUY_aA.js";import"./uni-transition.BUNxKfRz.js";import"./createAnimation.B3PX97fZ.js";const E=L({name:"UniFab",emits:["fabClick","trigger"],props:{pattern:{type:Object,default:()=>({})},horizontal:{type:String,default:"left"},vertical:{type:String,default:"bottom"},direction:{type:String,default:"horizontal"},content:{type:Array,default:()=>[]},show:{type:Boolean,default:!1},popMenu:{type:Boolean,default:!0}},data:()=>({fabShow:!1,isShow:!1,isAndroidNvue:!1,styles:{color:"#3c3e49",selectedColor:"#007AFF",backgroundColor:"#fff",buttonColor:"#007AFF",iconColor:"#fff",icon:"plusempty"}}),computed:{contentWidth(e){return 55*(this.content.length+1)+15+"px"},contentWidthMin:()=>"55px",boxWidth(){return this.getPosition(3,"horizontal")},boxHeight(){return this.getPosition(3,"vertical")},leftBottom(){return this.getPosition(0,"left","bottom")},rightBottom(){return this.getPosition(0,"right","bottom")},leftTop(){return this.getPosition(0,"left","top")},rightTop(){return this.getPosition(0,"right","top")},flexDirectionStart(){return this.getPosition(1,"vertical","top")},flexDirectionEnd(){return this.getPosition(1,"vertical","bottom")},horizontalLeft(){return this.getPosition(2,"horizontal","left")},horizontalRight(){return this.getPosition(2,"horizontal","right")},nvueBottom:()=>30},watch:{pattern:{handler(e,t){this.styles=Object.assign({},this.styles,e)},deep:!0}},created(){this.isShow=this.show,0===this.top&&(this.fabShow=!0),this.styles=Object.assign({},this.styles,this.pattern)},methods:{_onClick(){this.$emit("fabClick"),this.popMenu&&(this.isShow=!this.isShow)},open(){this.isShow=!0},close(){this.isShow=!1},_onItemClick(e,t){this.isShow&&this.$emit("trigger",{index:e,item:t})},getPosition(e,t,a){return 0===e?this.horizontal===t&&this.vertical===a:1===e?this.direction===t&&this.vertical===a:2===e?this.direction===t&&this.horizontal===a:this.isShow&&this.direction===t?this.contentWidth:this.contentWidthMin}}},[["render",function(g,v,_,y,b,w){const M=h,A=f,x=m,k=P(e("uni-icons"),S);return t(),a(M,{class:"uni-cursor-point"},{default:o((()=>[_.popMenu&&(w.leftBottom||w.rightBottom||w.leftTop||w.rightTop)&&_.content.length>0?(t(),a(M,{key:0,class:l([{"uni-fab--leftBottom":w.leftBottom,"uni-fab--rightBottom":w.rightBottom,"uni-fab--leftTop":w.leftTop,"uni-fab--rightTop":w.rightTop},"uni-fab"]),style:i(w.nvueBottom)},{default:o((()=>[n(M,{class:l([{"uni-fab__content--left":"left"===_.horizontal,"uni-fab__content--right":"right"===_.horizontal,"uni-fab__content--flexDirection":"vertical"===_.direction,"uni-fab__content--flexDirectionStart":w.flexDirectionStart,"uni-fab__content--flexDirectionEnd":w.flexDirectionEnd,"uni-fab__content--other-platform":!b.isAndroidNvue},"uni-fab__content"]),style:i({width:w.boxWidth,height:w.boxHeight,backgroundColor:b.styles.backgroundColor}),elevation:"5"},{default:o((()=>[w.flexDirectionStart||w.horizontalLeft?(t(),a(M,{key:0,class:"uni-fab__item uni-fab__item--first"})):s("",!0),(t(!0),c(r,null,u(_.content,((e,s)=>(t(),a(M,{key:s,class:l([{"uni-fab__item--active":b.isShow},"uni-fab__item"]),onClick:t=>w._onItemClick(s,e)},{default:o((()=>[n(A,{src:e.active?e.selectedIconPath:e.iconPath,class:"uni-fab__item-image",mode:"aspectFit"},null,8,["src"]),n(x,{class:"uni-fab__item-text",style:i({color:e.active?b.styles.selectedColor:b.styles.color})},{default:o((()=>[d(p(e.text),1)])),_:2},1032,["style"])])),_:2},1032,["class","onClick"])))),128)),w.flexDirectionEnd||w.horizontalRight?(t(),a(M,{key:1,class:"uni-fab__item uni-fab__item--first"})):s("",!0)])),_:1},8,["class","style"])])),_:1},8,["class","style"])):s("",!0),n(M,{class:l([{"uni-fab__circle--leftBottom":w.leftBottom,"uni-fab__circle--rightBottom":w.rightBottom,"uni-fab__circle--leftTop":w.leftTop,"uni-fab__circle--rightTop":w.rightTop,"uni-fab__content--other-platform":!b.isAndroidNvue},"uni-fab__circle uni-fab__plus"]),style:i({"background-color":b.styles.buttonColor,bottom:w.nvueBottom}),onClick:w._onClick},{default:o((()=>[n(k,{class:l(["fab-circle-icon",{"uni-fab__plus--active":b.isShow&&_.content.length>0}]),type:b.styles.icon,color:b.styles.iconColor,size:"32"},null,8,["type","color","class"])])),_:1},8,["class","style","onClick"])])),_:1})}],["__scopeId","data-v-2644bbd7"]]),R=""+new URL("猫爪-DI-6iPFF.png",import.meta.url).href,N=""+new URL("布偶猫-稀有色-DFZCveTY.png",import.meta.url).href,O=""+new URL("mapLogo-B0ym5XXp.png",import.meta.url).href;"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self&&self;function G(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var q={exports:{}};const K=G(q.exports=function(){function e(e){var o=[];return e.AMapUI&&o.push(t(e.AMapUI)),e.Loca&&o.push(a(e.Loca)),Promise.all(o)}function t(e){return new Promise((function(t,a){var l=[];if(e.plugins)for(var c=0;c<e.plugins.length;c+=1)-1==i.AMapUI.plugins.indexOf(e.plugins[c])&&l.push(e.plugins[c]);if(n.AMapUI===o.failed)a("前次请求 AMapUI 失败");else if(n.AMapUI===o.notload){n.AMapUI=o.loading,i.AMapUI.version=e.version||i.AMapUI.version,c=i.AMapUI.version;var r=document.body||document.head,u=document.createElement("script");u.type="text/javascript",u.src="https://webapi.amap.com/ui/"+c+"/main.js",u.onerror=function(e){n.AMapUI=o.failed,a("请求 AMapUI 失败")},u.onload=function(){if(n.AMapUI=o.loaded,l.length)window.AMapUI.loadUI(l,(function(){for(var e=0,a=l.length;e<a;e++){var o=l[e].split("/").slice(-1)[0];window.AMapUI[o]=arguments[e]}for(t();s.AMapUI.length;)s.AMapUI.splice(0,1)[0]()}));else for(t();s.AMapUI.length;)s.AMapUI.splice(0,1)[0]()},r.appendChild(u)}else n.AMapUI===o.loaded?e.version&&e.version!==i.AMapUI.version?a("不允许多个版本 AMapUI 混用"):l.length?window.AMapUI.loadUI(l,(function(){for(var e=0,a=l.length;e<a;e++){var o=l[e].split("/").slice(-1)[0];window.AMapUI[o]=arguments[e]}t()})):t():e.version&&e.version!==i.AMapUI.version?a("不允许多个版本 AMapUI 混用"):s.AMapUI.push((function(e){e?a(e):l.length?window.AMapUI.loadUI(l,(function(){for(var e=0,a=l.length;e<a;e++){var o=l[e].split("/").slice(-1)[0];window.AMapUI[o]=arguments[e]}t()})):t()}))}))}function a(e){return new Promise((function(t,a){if(n.Loca===o.failed)a("前次请求 Loca 失败");else if(n.Loca===o.notload){n.Loca=o.loading,i.Loca.version=e.version||i.Loca.version;var l=i.Loca.version,c=i.AMap.version.startsWith("2"),r=l.startsWith("2");if(c&&!r||!c&&r)a("JSAPI 与 Loca 版本不对应！！");else{c=i.key,r=document.body||document.head;var u=document.createElement("script");u.type="text/javascript",u.src="https://webapi.amap.com/loca?v="+l+"&key="+c,u.onerror=function(e){n.Loca=o.failed,a("请求 AMapUI 失败")},u.onload=function(){for(n.Loca=o.loaded,t();s.Loca.length;)s.Loca.splice(0,1)[0]()},r.appendChild(u)}}else n.Loca===o.loaded?e.version&&e.version!==i.Loca.version?a("不允许多个版本 Loca 混用"):t():e.version&&e.version!==i.Loca.version?a("不允许多个版本 Loca 混用"):s.Loca.push((function(e){e?a(e):a()}))}))}if(!window)throw Error("AMap JSAPI can only be used in Browser.");var o,l;(l=o||(o={})).notload="notload",l.loading="loading",l.loaded="loaded",l.failed="failed";var i={key:"",AMap:{version:"1.4.15",plugins:[]},AMapUI:{version:"1.1",plugins:[]},Loca:{version:"1.3.2"}},n={AMap:o.notload,AMapUI:o.notload,Loca:o.notload},s={AMap:[],AMapUI:[],Loca:[]},c=[],r=function(e){"function"==typeof e&&(n.AMap===o.loaded?e(window.AMap):c.push(e))};return{load:function(t){return new Promise((function(a,l){if(n.AMap==o.failed)l("");else if(n.AMap==o.notload){var s=t.key,u=t.version,d=t.plugins;s?(window.AMap&&"lbs.amap.com"!==location.host&&l("禁止多种API加载方式混用"),i.key=s,i.AMap.version=u||i.AMap.version,i.AMap.plugins=d||i.AMap.plugins,n.AMap=o.loading,u=document.body||document.head,window.___onAPILoaded=function(i){if(delete window.___onAPILoaded,i)n.AMap=o.failed,l(i);else for(n.AMap=o.loaded,e(t).then((function(){a(window.AMap)})).catch(l);c.length;)c.splice(0,1)[0]()},(d=document.createElement("script")).type="text/javascript",d.src="https://webapi.amap.com/maps?callback=___onAPILoaded&v="+i.AMap.version+"&key="+s+"&plugin="+i.AMap.plugins.join(","),d.onerror=function(e){n.AMap=o.failed,l(e)},u.appendChild(d)):l("请填写key")}else if(n.AMap==o.loaded)if(t.key&&t.key!==i.key)l("多个不一致的 key");else if(t.version&&t.version!==i.AMap.version)l("不允许多个版本 JSAPI 混用");else{if(s=[],t.plugins)for(u=0;u<t.plugins.length;u+=1)-1==i.AMap.plugins.indexOf(t.plugins[u])&&s.push(t.plugins[u]);s.length?window.AMap.plugin(s,(function(){e(t).then((function(){a(window.AMap)})).catch(l)})):e(t).then((function(){a(window.AMap)})).catch(l)}else if(t.key&&t.key!==i.key)l("多个不一致的 key");else if(t.version&&t.version!==i.AMap.version)l("不允许多个版本 JSAPI 混用");else{var p=[];if(t.plugins)for(u=0;u<t.plugins.length;u+=1)-1==i.AMap.plugins.indexOf(t.plugins[u])&&p.push(t.plugins[u]);r((function(){p.length?window.AMap.plugin(p,(function(){e(t).then((function(){a(window.AMap)})).catch(l)})):e(t).then((function(){a(window.AMap)})).catch(l)}))}}))},reset:function(){delete window.AMap,delete window.AMapUI,delete window.Loca,i={key:"",AMap:{version:"1.4.15",plugins:[]},AMapUI:{version:"1.1",plugins:[]},Loca:{version:"1.3.2"}},n={AMap:o.notload,AMapUI:o.notload,Loca:o.notload},s={AMap:[],AMapUI:[],Loca:[]}}}}());const W=L({name:"uni-data-select",mixins:[j.mixinDatacom||{}],props:{localdata:{type:Array,default:()=>[]},value:{type:[String,Number],default:""},modelValue:{type:[String,Number],default:""},label:{type:String,default:""},placeholder:{type:String,default:"请选择"},emptyTips:{type:String,default:"无选项"},clear:{type:Boolean,default:!0},defItem:{type:Number,default:0},disabled:{type:Boolean,default:!1},format:{type:String,default:""},placement:{type:String,default:"bottom"}},data:()=>({showSelector:!1,current:"",mixinDatacomResData:[],apps:[],channels:[],cacheKey:"uni-data-select-lastSelectedValue"}),created(){this.debounceGet=this.debounce((()=>{this.query()}),300),this.collection&&!this.localdata.length&&this.debounceGet()},computed:{typePlaceholder(){const e=this.placeholder,t={"opendb-stat-app-versions":"版本","opendb-app-channels":"渠道","opendb-app-list":"应用"}[this.collection];return t?e+t:e},valueCom(){return this.modelValue},textShow(){return this.current},getOffsetByPlacement(){switch(this.placement){case"top":return"bottom:calc(100% + 12px);";case"bottom":return"top:calc(100% + 12px);"}}},watch:{localdata:{immediate:!0,handler(e,t){Array.isArray(e)&&t!==e&&(this.mixinDatacomResData=e)}},valueCom(e,t){this.initDefVal()},mixinDatacomResData:{immediate:!0,handler(e){e.length&&this.initDefVal()}}},methods:{debounce(e,t=100){let a=null;return function(...o){a&&clearTimeout(a),a=setTimeout((()=>{e.apply(this,o)}),t)}},query(){this.mixinDatacomEasyGet()},onMixinDatacomPropsChange(){this.collection&&this.debounceGet()},initDefVal(){let e="";if(!this.valueCom&&0!==this.valueCom||this.isDisabled(this.valueCom)){let t;if(this.collection&&(t=this.getCache()),t||0===t)e=t;else{let t="";this.defItem>0&&this.defItem<=this.mixinDatacomResData.length&&(t=this.mixinDatacomResData[this.defItem-1].value),e=t}(e||0===e)&&this.emit(e)}else e=this.valueCom;const t=this.mixinDatacomResData.find((t=>t.value===e));this.current=t?this.formatItemName(t):""},isDisabled(e){let t=!1;return this.mixinDatacomResData.forEach((a=>{a.value===e&&(t=a.disable)})),t},clearVal(){this.emit(""),this.collection&&this.removeCache()},change(e){e.disable||(this.showSelector=!1,this.current=this.formatItemName(e),this.emit(e.value))},emit(e){this.$emit("input",e),this.$emit("update:modelValue",e),this.$emit("change",e),this.collection&&this.setCache(e)},toggleSelector(){this.disabled||(this.showSelector=!this.showSelector)},formatItemName(e){let{text:t,value:a,channel_code:o}=e;if(o=o?`(${o})`:"",this.format){let t="";t=this.format;for(let a in e)t=t.replace(new RegExp(`{${a}}`,"g"),e[a]);return t}return this.collection.indexOf("app-list")>0?`${t}(${a})`:t||`未命名${o}`},getLoadData(){return this.mixinDatacomResData},getCurrentCacheKey(){return this.collection},getCache(e=this.getCurrentCacheKey()){return(g(this.cacheKey)||{})[e]},setCache(e,t=this.getCurrentCacheKey()){let a=g(this.cacheKey)||{};a[t]=e,v(this.cacheKey,a)},removeCache(e=this.getCurrentCacheKey()){let t=g(this.cacheKey)||{};delete t[e],v(this.cacheKey,t)}}},[["render",function(f,g,v,b,w,M){const A=h,x=P(e("uni-icons"),S),k=m,C=y;return t(),a(A,{class:"uni-stat__select"},{default:o((()=>[v.label?(t(),c("span",{key:0,class:"uni-label-text hide-on-phone"},p(v.label+"："),1)):s("",!0),n(A,{class:l(["uni-stat-box",{"uni-stat__actived":w.current}])},{default:o((()=>[n(A,{class:l(["uni-select",{"uni-select--disabled":v.disabled}])},{default:o((()=>[n(A,{class:"uni-select__input-box",onClick:M.toggleSelector},{default:o((()=>[w.current?(t(),a(A,{key:0,class:"uni-select__input-text"},{default:o((()=>[d(p(M.textShow),1)])),_:1})):(t(),a(A,{key:1,class:"uni-select__input-text uni-select__input-placeholder"},{default:o((()=>[d(p(M.typePlaceholder),1)])),_:1})),w.current&&v.clear&&!v.disabled?(t(),a(A,{key:2,onClick:_(M.clearVal,["stop"])},{default:o((()=>[n(x,{type:"clear",color:"#c0c4cc",size:"24"})])),_:1},8,["onClick"])):(t(),a(A,{key:3},{default:o((()=>[n(x,{type:w.showSelector?"top":"bottom",size:"14",color:"#999"},null,8,["type"])])),_:1}))])),_:1},8,["onClick"]),w.showSelector?(t(),a(A,{key:0,class:"uni-select--mask",onClick:M.toggleSelector},null,8,["onClick"])):s("",!0),w.showSelector?(t(),a(A,{key:1,class:"uni-select__selector",style:i(M.getOffsetByPlacement)},{default:o((()=>[n(A,{class:l("bottom"==v.placement?"uni-popper__arrow_bottom":"uni-popper__arrow_top")},null,8,["class"]),n(C,{"scroll-y":"true",class:"uni-select__selector-scroll"},{default:o((()=>[0===w.mixinDatacomResData.length?(t(),a(A,{key:0,class:"uni-select__selector-empty"},{default:o((()=>[n(k,null,{default:o((()=>[d(p(v.emptyTips),1)])),_:1})])),_:1})):(t(!0),c(r,{key:1},u(w.mixinDatacomResData,((e,i)=>(t(),a(A,{class:"uni-select__selector-item",key:i,onClick:t=>M.change(e)},{default:o((()=>[n(k,{class:l({"uni-select__selector__disabled":e.disable})},{default:o((()=>[d(p(M.formatItemName(e)),1)])),_:2},1032,["class"])])),_:2},1032,["onClick"])))),128))])),_:1})])),_:1},8,["style"])):s("",!0)])),_:1},8,["class"])])),_:1},8,["class"])])),_:1})}],["__scopeId","data-v-e6cda8cc"]]),J=L({__name:"Map",setup(l){const i=b(`${g("token")}`),s=b("");b("").value="https://cdn.luckyiur.com/catcat",s.value="https://pawprintdiaries.luckyiur.com";const c=b(null),r=b(null),u=b({catId:"",longitude:"",latitude:"",name:""}),p=b({catId:{required:!0,message:"小猫名字不能为空"},longitude:{required:!0,message:"经度不能为空",trigger:"blur"},latitude:{required:!0,message:"纬度不能为空",trigger:"blur"},name:{required:!0,message:"上报者不能为空",trigger:"blur"}}),_=b([{iconPath:"/tempStatic/V1_填写表单.png",selectedIconPath:"/tempStatic/V1_填写表单.png",text:"发现小猫",active:!1},{iconPath:"/tempStatic/拍照.png",selectedIconPath:"/tempStatic/拍照.png",text:"上传 X",active:!1},{iconPath:"/tempStatic/更多 (2).png",selectedIconPath:"../static/更多 (2).png",text:"更多 X",active:!1}]);function y(e){i.value?(0===e.index&&L.plugin("AMap.Geolocation",(function(){new L.Geolocation({enableHighAccuracy:!0,timeout:1e4}).getCurrentPosition((function(e,t){"complete"===e?(console.log("经度："+t.position.lng),console.log("纬度："+t.position.lat),u.value.longitude=t.position.lng,u.value.latitude=t.position.lat,u.value.name=g("tokenDetail").username,c.value.open()):(console.error("获取位置失败",t.message),M({title:"获取位置失败",icon:"error"}))}))})),console.log(e.index)):M({title:"请登录之后再上传吧！",icon:"none"})}function S(){console.log(11)}let L,j,G,q,J,X,H;const Y=b([]),Z=b(""),Q=b(),ee=b([{text:"全部",value:80},{text:"北门（待开发）",value:82},{text:"岐头（待开发）",value:63},{text:"凤翔（待开发）",value:86},{text:"厚德楼（待开发）",value:65},{text:"香晖苑（待开发）",value:79},{text:"2-4栋教学楼（待开发）",value:82},{text:"朝晖苑（待开发）",value:63},{text:"体育馆（待开发）",value:86},{text:"图书馆（待开发）",value:65},{text:"实验楼（待开发）",value:79}]),te=b(80),ae=e=>{80===e&&(le.value=null,w({url:`${s.value}/api/cat/findCoordinate`,method:"GET",success:e=>{200===e.statusCode&&"2000"===e.data.code?(Q.value=e.data.data,console.log(Q.value),Z.value="point",Y.value=Q.value.map((e=>[parseFloat(e.longitude.toFixed(6)),parseFloat(e.latitude.toFixed(6)),e.catName])),console.log(Y.value),j.clearMap(),J.clearMap(),se()):M({title:res.data.msg||"全部小猫最新坐标失败",icon:"none"})},fail:()=>{M({title:"请求全部小猫最新坐标失败，请重试",icon:"none"})}}))},oe=b(),le=b(),ie=e=>{console.log("Selected value: ",e),te.value=null,w({url:`${s.value}/api/cat/findCoordinateByPage?catId=${e}`,method:"GET",success:e=>{200===e.statusCode&&"2000"===e.data.code?(Y.value=e.data.data.records.map((e=>[parseFloat(e.longitude.toFixed(6)),parseFloat(e.latitude.toFixed(6)),e.catName])),Z.value="line",j.clearMap(),J.clearMap(),se(),console.log(Y.value)):M({title:res.data.msg||"某只小猫最新坐标失败",icon:"none"})},fail:()=>{M({title:"请求某只小猫最新坐标失败，请重试",icon:"none"})}})};U((()=>{w({url:`${s.value}/api/cat/findAll`,method:"GET",success:e=>{console.log(e.data.data),200===e.statusCode&&"2000"===e.data.code&&(oe.value=e.data.data.map((e=>({text:e.catname,value:e.catId}))),console.log(oe.value),v("catList",e.data.data))},fail:e=>{M({title:"获取小猫数据失败 "+e,icon:"none"})}}),console.log("请求全部小猫最新坐标"),w({url:`${s.value}/api/cat/findCoordinate`,method:"GET",success:e=>{200===e.statusCode&&"2000"===e.data.code?(Q.value=e.data.data,console.log(Q.value),Z.value="point",Y.value=Q.value.map((e=>[parseFloat(e.longitude.toFixed(6)),parseFloat(e.latitude.toFixed(6)),e.catName])),console.log(Y.value)):M({title:res.data.msg||"全部小猫最新坐标失败",icon:"none"})},fail:()=>{M({title:"请求全部小猫最新坐标失败，请重试",icon:"none"})}}),window._AMapSecurityConfig={securityJsCode:"d099747db9129b84ab6ce834d56e9573"},K.load({key:"aada17cf2848387456285d0e1b5c74c6",version:"2.0",plugins:["AMap.Scale","AMap.Geolocation","AMap.Marker","AMap.Polyline"]}).then((e=>{L=e,j=new L.Map("mymap",{viewMode:"3D",zoom:16,center:[113.390166,22.527103],pitch:45,rotation:0,rotateEnable:!0,pitchEnable:!0,features:["bg","road","name"]}),j.addControl(new L.Scale),j.addControl(new L.Geolocation);const t=new L.ImageLayer({url:"../static/realmap.jpg",bounds:new L.Bounds([113.386036,22.523024],[113.396039,22.532817]),opacity:1});j.add(t),J=new L.Map("mymap2",{viewMode:"2D",zoom:16,center:[113.390166,22.527103]}),J.addControl(new L.Scale),J.addControl(new L.Geolocation),se()})).catch((e=>{console.log(e)}))})),A((()=>{console.log("页面挂载")})),x((()=>{}));const ne=()=>{console.log(u.value),w({url:`${s.value}/api/cat/uploadCatCoordinate`,method:"POST",header:{Authorization:`Bearer ${i.value}`},data:{catId:u.value.catId,latitude:u.value.latitude,longitude:u.value.longitude,uploader:u.value.name},success:e=>{200===e.statusCode&&"2000"===e.data.code?(M({title:"提交成功！",icon:"none"}),c.value.close()):M({title:e.data.msg,icon:"none"})}})};function se(){if(console.log(Z.value),"point"===Z.value)Y.value.forEach((e=>{G=new L.Marker({position:[e[0],e[1]],icon:"../static/红点12.svg",offset:new L.Pixel(-20,-20)}),G.setMap(j),G.setLabel({offset:new L.Pixel(-17,-15),content:`<div class='mapLabelInfo'>${e[2]}</div>`,direction:"right"})})),Y.value.forEach((e=>{X=new L.Marker({position:[e[0],e[1]],icon:"../static/红点12.svg",offset:new L.Pixel(-5,-5)}),X.setMap(J),X.setLabel({content:`<div class='mapLabelInfo'>${e[2]}</div>`,direction:"right"})}));else if("line"===Z.value){console.log(Y.value);let e=Y.value.map((e=>[e[0],e[1]]));console.log(e),q=new L.Polyline({path:e,strokeColor:"#55ffff",strokeWeight:4,strokeOpacity:.9}),j.add(q);let t=new L.Marker({position:e[0],icon:"../static/猫32.svg",offset:new L.Pixel(-20,-20)});j.add(t);let a=new L.Marker({position:e[e.length-1],icon:"../static/到站16.svg",offset:new L.Pixel(-8,-10)});j.add(a),H=new L.Polyline({path:Y.value,strokeColor:"#55ffff",strokeWeight:4,strokeOpacity:.9}),J.add(H);let o=new L.Marker({position:Y.value[0],icon:"../static/猫32.svg",offset:new L.Pixel(-20,-20)});J.add(o);let l=new L.Marker({position:Y.value[Y.value.length-1],icon:"../static/到站16.svg",offset:new L.Pixel(-8,-10)});J.add(l)}}return b(""),(l,i)=>{const s=f,g=m,v=h,b=P(e("uni-fab"),E),w=P(e("uni-forms-item"),D),M=P(e("uni-easyinput"),z),A=I,x=P(e("uni-forms"),V),U=P(e("uni-popup"),F);return t(),a(v,{class:"container"},{default:o((()=>[n(v,{class:"layout"},{default:o((()=>[n(B,{class:"t9zhgf",title:"寻猫日迹",subTitle:"",titleFontSize:"40rpx",type:"line"},{default:o((()=>[n(v,{class:"t9h89ho"},{default:o((()=>[n(T,{class:"r89yu",gutter:0,width:730},{default:o((()=>[n($,{span:24},{default:o((()=>[n(v,{class:"t89hfws"},{default:o((()=>[n(s,{class:"tzx8hh",src:R,mode:"aspectFill"}),n(g,{class:"t7uj9"},{default:o((()=>[d("选择区域：")])),_:1})])),_:1}),n(v,{class:"t8hj0i"},{default:o((()=>[n(k(W),{placeholder:"请选择区域",modelValue:te.value,"onUpdate:modelValue":i[0]||(i[0]=e=>te.value=e),localdata:ee.value,onChange:ae},null,8,["modelValue","localdata"])])),_:1})])),_:1}),n($,{span:0}),n($,{span:0},{default:o((()=>[n(v,{class:"t98h9uh"})])),_:1})])),_:1}),n(T,{class:"r89yu",gutter:0,width:730},{default:o((()=>[n($,{span:24},{default:o((()=>[n(v,{class:"t89hfws"},{default:o((()=>[n(s,{class:"tzx8hh",src:N,mode:"aspectFill"}),n(g,{class:"t7uj9"},{default:o((()=>[d("选择小猫：")])),_:1})])),_:1}),n(v,{class:"t8hj0i"},{default:o((()=>[n(k(W),{placeholder:"请选择小猫",modelValue:le.value,"onUpdate:modelValue":i[1]||(i[1]=e=>le.value=e),localdata:oe.value,onChange:ie},null,8,["modelValue","localdata"])])),_:1})])),_:1}),n($,{span:0}),n($,{span:0},{default:o((()=>[n(v,{class:"t98h9uh"})])),_:1})])),_:1})])),_:1})])),_:1}),C("div",{class:"m23rhj",id:"mymap"}),n(v,{class:"t9gh9hu"},{default:o((()=>[n(s,{class:"i69yhu9",src:O,mode:""})])),_:1}),C("div",{class:"m23rh0",id:"mymap2"}),n(b,{ref:"fab",pattern:l.pattern,content:_.value,horizontal:l.horizontal,vertical:l.vertical,direction:l.direction,onTrigger:y,onFabClick:S},null,8,["pattern","content","horizontal","vertical","direction"]),n(v,{class:"h09h"},{default:o((()=>[n(U,{ref_key:"popupFromUpload",ref:c,type:"bottom","background-color":"#fff",onChange:l.change},{default:o((()=>[n(v,{class:"popup-content"},{default:o((()=>[n(v,{class:"t9hkz"},{default:o((()=>[n(g,null,{default:o((()=>[d("报告小猫踪迹！")])),_:1})])),_:1}),n(v,{class:"form1"},{default:o((()=>[n(x,{ref_key:"reportForm",ref:r,model:u.value,rules:p.value},{default:o((()=>[n(w,{label:"小猫名字",required:""},{default:o((()=>[n(k(W),{modelValue:u.value.catId,"onUpdate:modelValue":i[2]||(i[2]=e=>u.value.catId=e),localdata:oe.value,onChange:l.change,placeholder:"你发现了哪一只小猫？"},null,8,["modelValue","localdata","onChange"])])),_:1}),n(w,{label:"经度",required:""},{default:o((()=>[n(M,{modelValue:u.value.longitude,"onUpdate:modelValue":i[3]||(i[3]=e=>u.value.longitude=e),placeholder:"将自动获取经度信息"},null,8,["modelValue"])])),_:1}),n(w,{label:"纬度",required:""},{default:o((()=>[n(M,{modelValue:u.value.latitude,"onUpdate:modelValue":i[4]||(i[4]=e=>u.value.latitude=e),placeholder:"将自动获取纬度信息"},null,8,["modelValue"])])),_:1}),n(w,{label:"上报者",required:""},{default:o((()=>[n(M,{modelValue:u.value.name,"onUpdate:modelValue":i[5]||(i[5]=e=>u.value.name=e),placeholder:"我们如何称呼您？"},null,8,["modelValue"])])),_:1}),n(A,{type:"button",onClick:ne},{default:o((()=>[d("提交")])),_:1})])),_:1},8,["model","rules"])])),_:1})])),_:1})])),_:1},8,["onChange"])])),_:1})])),_:1})])),_:1})}}},[["__scopeId","data-v-de8acb64"]]);export{J as default};
